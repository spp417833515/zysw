# 税率设置功能实现说明

## 功能概述
已完成税率设置页面和季度交税预算计算功能，基于中国真实税率。

## 你的公司情况
- **公司类型**：有限责任公司
- **注册资金**：5万元
- **员工数量**：1人
- **纳税人类型**：小规模纳税人

## 税率配置（基于2025年中国税法）

### 有限责任公司应缴税种

1. **增值税**：3%（小规模纳税人）
   - 季度销售额30万以下免征

2. **附加税**：增值税的12%
   - 城建税：7%
   - 教育费附加：3%
   - 地方教育附加：2%

3. **企业所得税**（不是个人所得税！）
   - 标准税率：25%
   - 小微企业优惠税率：
     - 年利润≤100万：5%
     - 100万<年利润≤300万：10%
     - 年利润>300万：25%

### 小微企业优惠条件
同时满足以下条件可享受优惠：
1. 年应纳税所得额 ≤ 300万元
2. 从业人数 ≤ 300人
3. 资产总额 ≤ 5000万元

**你的公司完全符合小微企业条件！**

## 已实现功能

### 1. 后端API
- `GET /settings/tax` - 获取税率设置
- `POST /settings/tax` - 保存税率设置
- `PUT /settings/tax` - 更新税率设置

### 2. 前端页面
- **税率设置页面**：`/settings` - 可配置增值税率、免征额、附加税率等
- **季度交税预算**：仪表盘显示当前季度的税款预算

### 3. 税款计算逻辑
- 增值税：收入 / (1 + 税率) × 税率
- 附加税：增值税 × 12%
- 企业所得税：利润 × 税率（小微企业5%-10%）
- 免征判断：季度收入低于免征额则免征增值税和附加税

## 使用说明

1. **配置税率**：
   - 进入"系统设置"页面
   - 填写税率设置表单
   - 选择"小规模纳税人"
   - 保存设置

2. **查看税款预算**：
   - 进入"仪表盘"
   - 查看"季度交税预算"卡片
   - 显示当前季度的收入、支出、利润和应缴税款

3. **税务申报提醒**：
   - 仪表盘显示征期倒计时
   - 自动计算节假日顺延

## 注意事项

1. 本系统计算的税款为**预估值**，实际应缴税款以税务机关核定为准
2. 有限责任公司缴纳**企业所得税**，不是个人所得税
3. 季度销售额接近30万时，注意控制开票金额以享受免征优惠
4. 建议定期更新税率配置，以适应税收政策变化
5. 建议咨询专业税务顾问确保合规

## 文件清单

### 后端
- `server/app/settings/models.py` - 添加TaxSettings模型
- `server/app/settings/schemas.py` - 添加税率设置schemas
- `server/app/settings/service.py` - 添加税率设置服务
- `server/app/settings/router.py` - 添加税率设置API

### 前端
- `src/api/settings.ts` - 添加税率设置API接口
- `src/pages/Settings/components/TaxSettingsForm.tsx` - 税率设置表单
- `src/pages/Dashboard/components/QuarterlyTaxBudget.tsx` - 季度交税预算组件
- `src/utils/taxCalculator.ts` - 税款计算工具函数（企业所得税）
- `src/utils/taxConfig.ts` - 税务配置（已存在）

## 下一步建议

1. 根据实际业务情况调整税率配置
2. 定期检查税款预算，合理规划资金
3. 在征期前完成税务申报
4. 考虑咨询专业税务顾问，确保合规
